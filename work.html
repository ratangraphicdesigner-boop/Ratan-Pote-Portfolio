<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>My Work | Ratan S. Pote</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{--primary:#1a1a1a;--accent:#e05a33;--gray:#666;--light:#f8f8f8;--white:#fff}
body{font-family:'Inter',sans-serif;color:var(--primary);line-height:1.6;background:var(--white)}
.container{max-width:1100px;margin:0 auto;padding:0 24px}
a{color:inherit;text-decoration:none}

nav{padding:20px 0;position:fixed;width:100%;background:rgba(255,255,255,0.95);backdrop-filter:blur(10px);z-index:100;border-bottom:1px solid #eee}
nav .container{display:flex;justify-content:space-between;align-items:center}
.logo{font-weight:700;font-size:1.1rem}
.nav-links{display:flex;gap:32px}
.nav-links a{font-size:0.9rem;color:var(--gray);transition:color 0.3s}
.nav-links a:hover,.nav-links a.active{color:var(--primary);font-weight:600}
.menu-btn{display:none;background:none;border:none;cursor:pointer;padding:8px;z-index:200}
.menu-btn span{display:block;width:24px;height:2px;background:var(--primary);margin:5px 0}

.mobile-menu{position:fixed;top:0;left:0;width:100%;height:100vh;background:var(--white);display:flex;flex-direction:column;justify-content:center;align-items:center;gap:32px;z-index:150;transform:translateX(-100%);transition:transform 0.3s ease}
.mobile-menu.open{transform:translateX(0)}
.mobile-menu a{font-size:1.5rem;color:var(--primary);font-weight:600}

.work-hero{padding:120px 0 40px;text-align:center}
.work-hero h1{font-size:2.5rem;margin-bottom:8px}
.work-hero p{color:var(--gray)}
.work-stats{display:flex;justify-content:center;gap:48px;margin-top:24px;padding-bottom:40px;border-bottom:1px solid #eee}
.work-stat{text-align:center}
.work-stat h3{font-size:1.8rem;font-weight:700;color:var(--primary)}
.work-stat p{font-size:0.8rem;color:var(--gray)}

.work-categories{padding:40px 0 80px}
.category-tabs{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:32px;justify-content:center}
.cat-tab{padding:10px 20px;border:2px solid #eee;background:transparent;border-radius:30px;cursor:pointer;font-size:0.85rem;transition:all 0.3s;display:flex;align-items:center;gap:8px}
.cat-tab:hover,.cat-tab.active{border-color:var(--primary);background:var(--primary);color:var(--white)}
.cat-tab .count{background:rgba(0,0,0,0.1);padding:2px 8px;border-radius:12px;font-size:0.75rem}
.cat-tab.active .count{background:rgba(255,255,255,0.2)}

.work-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:16px}
.work-item{border-radius:10px;overflow:hidden;cursor:pointer;position:relative;aspect-ratio:1;background:var(--light)}
.work-item img{width:100%;height:100%;object-fit:cover;transition:transform 0.5s}
.work-item:hover img{transform:scale(1.1)}
.work-item .work-overlay{position:absolute;inset:0;background:linear-gradient(to top,rgba(0,0,0,0.85) 0%,rgba(0,0,0,0.4) 50%,transparent 100%);display:flex;flex-direction:column;justify-content:flex-end;padding:20px;opacity:0;transition:opacity 0.3s}
.work-item:hover .work-overlay{opacity:1}
.work-overlay h4{color:var(--white);font-size:0.95rem;margin-bottom:4px}
.work-overlay span{color:rgba(255,255,255,0.7);font-size:0.8rem}
.work-item .zoom-icon{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%) scale(0);width:50px;height:50px;background:rgba(255,255,255,0.9);border-radius:50%;display:flex;align-items:center;justify-content:center;transition:transform 0.3s;font-size:1.2rem}
.work-item:hover .zoom-icon{transform:translate(-50%,-50%) scale(1)}

.work-cta{padding:60px 0;background:var(--light);text-align:center}
.work-cta h2{margin-bottom:8px}
.work-cta p{color:var(--gray);margin-bottom:24px}
.btn{display:inline-block;padding:14px 32px;background:var(--primary);color:var(--white);border-radius:8px;font-weight:500;transition:transform 0.3s,box-shadow 0.3s}
.btn:hover{transform:translateY(-2px);box-shadow:0 10px 30px rgba(0,0,0,0.15)}

/* Lightbox with Zoom */
.lightbox{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.95);z-index:200;display:none;flex-direction:column;justify-content:center;align-items:center}
.lightbox.active{display:flex}
.lightbox-header{position:absolute;top:0;left:0;right:0;padding:20px 30px;display:flex;justify-content:space-between;align-items:center;z-index:10;background:linear-gradient(to bottom,rgba(0,0,0,0.7),transparent)}
.lightbox-info h4{color:#fff;font-size:1.1rem;margin-bottom:2px}
.lightbox-info span{color:rgba(255,255,255,0.6);font-size:0.85rem}
.lightbox-controls{display:flex;gap:15px}
.lightbox-btn{background:rgba(255,255,255,0.1);border:none;color:#fff;width:44px;height:44px;border-radius:50%;cursor:pointer;font-size:1.2rem;transition:background 0.3s;display:flex;align-items:center;justify-content:center}
.lightbox-btn:hover{background:rgba(255,255,255,0.2)}
.lightbox-img-container{width:100%;height:100%;display:flex;justify-content:center;align-items:center;overflow:hidden;padding:80px 60px 60px;cursor:grab}
.lightbox-img-container.dragging{cursor:grabbing}
.lightbox-img-container img{max-width:90%;max-height:90%;object-fit:contain;transition:transform 0.1s ease-out;transform-origin:center center}
.lightbox-nav{position:absolute;top:50%;transform:translateY(-50%);background:rgba(255,255,255,0.1);border:none;color:#fff;width:50px;height:50px;border-radius:50%;cursor:pointer;font-size:1.5rem;transition:background 0.3s;display:flex;align-items:center;justify-content:center}
.lightbox-nav:hover{background:rgba(255,255,255,0.2)}
.lightbox-nav.prev{left:20px}
.lightbox-nav.next{right:20px}
.lightbox-counter{position:absolute;bottom:20px;left:50%;transform:translateX(-50%);color:rgba(255,255,255,0.6);font-size:0.9rem}
.zoom-level{position:absolute;bottom:50px;left:50%;transform:translateX(-50%);color:rgba(255,255,255,0.8);font-size:0.85rem;background:rgba(0,0,0,0.5);padding:6px 14px;border-radius:20px;opacity:0;transition:opacity 0.3s}
.zoom-level.show{opacity:1}
.zoom-hint{position:absolute;bottom:80px;left:50%;transform:translateX(-50%);color:rgba(255,255,255,0.5);font-size:0.75rem;text-align:center}

footer{background:var(--primary);color:rgba(255,255,255,0.6);padding:24px 0;border-top:1px solid rgba(255,255,255,0.1)}
footer .container{display:flex;justify-content:space-between;align-items:center}
footer p{font-size:0.85rem}
.social-links{display:flex;gap:16px}
.social-links a{width:36px;height:36px;background:rgba(255,255,255,0.1);border-radius:8px;display:flex;align-items:center;justify-content:center;transition:background 0.3s}
.social-links a:hover{background:var(--accent)}

@media(max-width:900px){
.work-grid{grid-template-columns:repeat(3,1fr)}
.work-stats{gap:32px}
.lightbox-nav{width:40px;height:40px;font-size:1.2rem}
.lightbox-nav.prev{left:10px}
.lightbox-nav.next{right:10px}
}
@media(max-width:600px){
.nav-links{display:none}
.menu-btn{display:block}
.work-grid{grid-template-columns:repeat(2,1fr)}
.category-tabs{gap:8px}
.cat-tab{padding:8px 14px;font-size:0.8rem}
.work-stats{gap:24px;flex-wrap:wrap}
.work-stat h3{font-size:1.4rem}
footer .container{flex-direction:column;gap:16px;text-align:center}
.lightbox-header{padding:15px;flex-direction:column;gap:10px}
.lightbox-info{text-align:center}
}
</style>
</head>
<body>

<div class="mobile-menu" id="mobileMenu">
<a href="index.html">Home</a>
<a href="index.html#about">About</a>
<a href="index.html#services">Services</a>
<a href="work.html" class="active">Work</a>
<a href="index.html#contact">Contact</a>
</div>

<nav>
<div class="container">
<a href="index.html" class="logo">RATAN POTE</a>
<div class="nav-links">
<a href="index.html#about">About</a>
<a href="index.html#services">Services</a>
<a href="work.html" class="active">Work</a>
<a href="index.html#experience">Experience</a>
<a href="index.html#contact">Contact</a>
</div>
<button class="menu-btn" id="menuBtn"><span></span><span></span><span></span></button>
</div>
</nav>

<section class="work-hero">
<div class="container">
<h1>My Work</h1>
<p>10+ years of creative design across industries</p>
<div class="work-stats">
<div class="work-stat"><h3>100+</h3><p>Projects</p></div>
<div class="work-stat"><h3>50+</h3><p>Clients</p></div>
<div class="work-stat"><h3>6</h3><p>Categories</p></div>
</div>
</div>
</section>

<section class="work-categories">
<div class="container">
<div class="category-tabs">
<button class="cat-tab active" data-cat="all">All Work <span class="count">30</span></button>
<button class="cat-tab" data-cat="branding">Branding <span class="count">5</span></button>
<button class="cat-tab" data-cat="print">Print Design <span class="count">5</span></button>
<button class="cat-tab" data-cat="social-media">Social Media <span class="count">5</span></button>
<button class="cat-tab" data-cat="packaging">Packaging <span class="count">5</span></button>
<button class="cat-tab" data-cat="presentations">Presentations <span class="count">5</span></button>
<button class="cat-tab" data-cat="publications">Publications & Reports <span class="count">5</span></button>
</div>

<div class="work-grid" id="workGrid">
<!-- Branding - 5 images -->
<div class="work-item" data-category="branding">
<img src="https://images.unsplash.com/photo-1626785774573-4b799315345d?w=600&h=600&fit=crop" alt="Branding">
<div class="zoom-icon">üîç</div>
<div class="work-overlay"><h4>Tech Startup Logo</h4><span>Branding</span></div>
</div>
<div class="work-item" data-category="branding">
<img src="https://images.unsplash.com/photo-1600132806370-bf17e65e942f?w=600&h=600&fit=crop" alt="Branding">
<div class="zoom-icon">üîç</div>
<div class="work-overlay"><h4>Restaurant Identity</h4><span>Branding</span></div>
</div>
<div class="work-item" data-category="branding">
<img src="https://images.unsplash.com/photo-1586717791821-3f44a563fa4c?w=600&h=600&fit=crop" alt="Branding">
<div class="zoom-icon">üîç</div>
<div class="work-overlay"><h4>Brand Guidelines</h4><span>Branding</span></div>
</div>
<div class="work-item" data-category="branding">
<img src="https://images.unsplash.com/photo-1560179707-f14e90ef3623?w=600&h=600&fit=crop" alt="Branding">
<div class="zoom-icon">üîç</div>
<div class="work-overlay"><h4>Corporate Identity</h4><span>Branding</span></div>
</div>
<div class="work-item" data-category="branding">
<img src="https://images.unsplash.com/photo-1634942537034-2531766767d1?w=600&h=600&fit=crop" alt="Branding">
<div class="zoom-icon">üîç</div>
<div class="work-overlay"><h4>Logo Design</h4><span>Branding</span></div>
</div>

<!-- Print Design - 5 images -->
<div class="work-item" data-category="print">
<img src="https://images.unsplash.com/photo-1561070791-2526d30994b5?w=600&h=600&fit=crop" alt="Print">
<div class="zoom-icon">üîç</div>
<div class="work-overlay"><h4>Product Brochure</h4><span>Print Design</span></div>
</div>
<div class="work-item" data-category="print">
<img src="https://images.unsplash.com/photo-1531346878377-a5be20888e57?w=600&h=600&fit=crop" alt="Print">
<div class="zoom-icon">üîç</div>
<div class="work-overlay"><h4>Event Flyer</h4><span>Print Design</span></div>
</div>
<div class="work-item" data-category="print">
<img src="https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?w=600&h=600&fit=crop" alt="Print">
<div class="zoom-icon">üîç</div>
<div class="work-overlay"><h4>Business Cards</h4><span>Print Design</span></div>
</div>
<div class="work-item" data-category="print">
<img src="https://images.unsplash.com/photo-1572044162444-ad60f128bdea?w=600&h=600&fit=crop" alt="Print">
<div class="zoom-icon">üîç</div>
<div class="work-overlay"><h4>Magazine Layout</h4><span>Print Design</span></div>
</div>
<div class="work-item" data-category="print">
<img src="https://images.unsplash.com/photo-1586075010923-2dd4570fb338?w=600&h=600&fit=crop" alt="Print">
<div class="zoom-icon">üîç</div>
<div class="work-overlay"><h4>Catalog Design</h4><span>Print Design</span></div>
</div>

<!-- Social Media - 5 images -->
<div class="work-item" data-category="social-media">
<img src="https://images.unsplash.com/photo-1611532736597-de2d4265fba3?w=600&h=600&fit=crop" alt="Social Media">
<div class="zoom-icon">üîç</div>
<div class="work-overlay"><h4>Instagram Campaign</h4><span>Social Media</span></div>
</div>
<div class="work-item" data-category="social-media">
<img src="./images/social-2.jpg" alt="Social Media">
<div class="zoom-icon">üîç</div>
<div class="work-overlay"><h4>Facebook Ads</h4><span>Social Media</span></div>
</div>
<div class="work-item" data-category="social-media">
<img src="https://images.unsplash.com/photo-1432888622747-4eb9a8efeb07?w=600&h=600&fit=crop" alt="Social Media">
<div class="zoom-icon">üîç</div>
<div class="work-overlay"><h4>LinkedIn Posts</h4><span>Social Media</span></div>
</div>
<div class="work-item" data-category="social-media">
<img src="https://images.unsplash.com/photo-1611162616305-c69b3fa7fbe0?w=600&h=600&fit=crop" alt="Social Media">
<div class="zoom-icon">üîç</div>
<div class="work-overlay"><h4>Social Media Kit</h4><span>Social Media</span></div>
</div>
<div class="work-item" data-category="social-media">
<img src="https://images.unsplash.com/photo-1557838923-2985c318be48?w=600&h=600&fit=crop" alt="Social Media">
<div class="zoom-icon">üîç</div>
<div class="work-overlay"><h4>Story Templates</h4><span>Social Media</span></div>
</div>

<!-- Packaging - 5 images -->
<div class="work-item" data-category="packaging">
<img src="https://images.unsplash.com/photo-1558655146-9f40138edfeb?w=600&h=600&fit=crop" alt="Packaging">
<div class="zoom-icon">üîç</div>
<div class="work-overlay"><h4>Cosmetic Packaging</h4><span>Packaging</span></div>
</div>
<div class="work-item" data-category="packaging">
<img src="https://images.unsplash.com/photo-1607082348824-0a96f2a4b9da?w=600&h=600&fit=crop" alt="Packaging">
<div class="zoom-icon">üîç</div>
<div class="work-overlay"><h4>Food Packaging</h4><span>Packaging</span></div>
</div>
<div class="work-item" data-category="packaging">
<img src="https://images.unsplash.com/photo-1547949003-9792a18a2601?w=600&h=600&fit=crop" alt="Packaging">
<div class="zoom-icon">üîç</div>
<div class="work-overlay"><h4>Product Box Design</h4><span>Packaging</span></div>
</div>
<div class="work-item" data-category="packaging">
<img src="https://images.unsplash.com/photo-1589782182703-2aaa69037b5b?w=600&h=600&fit=crop" alt="Packaging">
<div class="zoom-icon">üîç</div>
<div class="work-overlay"><h4>Bottle Label</h4><span>Packaging</span></div>
</div>
<div class="work-item" data-category="packaging">
<img src="https://images.unsplash.com/photo-1605000797499-95a51c5269ae?w=600&h=600&fit=crop" alt="Packaging">
<div class="zoom-icon">üîç</div>
<div class="work-overlay"><h4>Gift Box Design</h4><span>Packaging</span></div>
</div>

<!-- Presentations - 5 images -->
<div class="work-item" data-category="presentations">
<img src="https://images.unsplash.com/photo-1557804506-669a67965ba0?w=600&h=600&fit=crop" alt="Presentation">
<div class="zoom-icon">üîç</div>
<div class="work-overlay"><h4>Investor Pitch Deck</h4><span>Presentations</span></div>
</div>
<div class="work-item" data-category="presentations">
<img src="https://images.unsplash.com/photo-1552664730-d307ca884978?w=600&h=600&fit=crop" alt="Presentation">
<div class="zoom-icon">üîç</div>
<div class="work-overlay"><h4>Corporate Deck</h4><span>Presentations</span></div>
</div>
<div class="work-item" data-category="presentations">
<img src="https://images.unsplash.com/photo-1542744173-8e7e53415bb0?w=600&h=600&fit=crop" alt="Presentation">
<div class="zoom-icon">üîç</div>
<div class="work-overlay"><h4>Sales Presentation</h4><span>Presentations</span></div>
</div>
<div class="work-item" data-category="presentations">
<img src="https://images.unsplash.com/photo-1531498860502-7c67cf02f657?w=600&h=600&fit=crop" alt="Presentation">
<div class="zoom-icon">üîç</div>
<div class="work-overlay"><h4>Training Slides</h4><span>Presentations</span></div>
</div>
<div class="work-item" data-category="presentations">
<img src="https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?w=600&h=600&fit=crop" alt="Presentation">
<div class="zoom-icon">üîç</div>
<div class="work-overlay"><h4>Business Proposal</h4><span>Presentations</span></div>
</div>

<!-- Publications & Reports - 5 images -->
<div class="work-item" data-category="publications">
<img src="https://images.unsplash.com/photo-1609921212029-bb5a28e60960?w=600&h=600&fit=crop" alt="Publication">
<div class="zoom-icon">üîç</div>
<div class="work-overlay"><h4>Annual Report</h4><span>Publications & Reports</span></div>
</div>
<div class="work-item" data-category="publications">
<img src="https://images.unsplash.com/photo-1544947950-fa07a98d237f?w=600&h=600&fit=crop" alt="Publication">
<div class="zoom-icon">üîç</div>
<div class="work-overlay"><h4>ESG Report</h4><span>Publications & Reports</span></div>
</div>
<div class="work-item" data-category="publications">
<img src="https://images.unsplash.com/photo-1512820790803-83ca734da794?w=600&h=600&fit=crop" alt="Publication">
<div class="zoom-icon">üîç</div>
<div class="work-overlay"><h4>Magazine Design</h4><span>Publications & Reports</span></div>
</div>
<div class="work-item" data-category="publications">
<img src="https://images.unsplash.com/photo-1553729459-efe14ef6055d?w=600&h=600&fit=crop" alt="Publication">
<div class="zoom-icon">üîç</div>
<div class="work-overlay"><h4>Book Layout</h4><span>Publications & Reports</span></div>
</div>
<div class="work-item" data-category="publications">
<img src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=600&h=600&fit=crop" alt="Publication">
<div class="zoom-icon">üîç</div>
<div class="work-overlay"><h4>Infographic Report</h4><span>Publications & Reports</span></div>
</div>
</div>
</div>
</section>

<!-- Lightbox -->
<div class="lightbox" id="lightbox">
<div class="lightbox-header">
<div class="lightbox-info">
<h4 id="lightboxTitle"></h4>
<span id="lightboxCategory"></span>
</div>
<div class="lightbox-controls">
<button class="lightbox-btn" id="zoomBtn" title="Zoom In/Out">üîç</button>
<button class="lightbox-btn" id="closeBtn" title="Close">‚úï</button>
</div>
</div>
<button class="lightbox-nav prev" id="prevBtn">‚ùÆ</button>
<button class="lightbox-nav next" id="nextBtn">‚ùØ</button>
<div class="lightbox-img-container" id="imgContainer">
<img src="" alt="Project" id="lightboxImg">
</div>
<div class="lightbox-counter"><span id="currentNum">1</span> / <span id="totalNum">30</span></div>
<div class="zoom-level" id="zoomLevel">100%</div>
<div class="zoom-hint">Scroll to zoom ‚Ä¢ Drag to pan ‚Ä¢ Arrow keys to navigate</div>
</div>

<section class="work-cta">
<div class="container">
<h2>Like what you see?</h2>
<p>Let's discuss your project</p>
<a href="index.html#contact" class="btn">Get In Touch</a>
</div>
</section>

<footer>
<div class="container">
<p>¬© 2025 Ratan S. Pote. All rights reserved.</p>
<div class="social-links">
<a href="#" title="LinkedIn">in</a>
<a href="#" title="Behance">Be</a>
<a href="#" title="Dribbble">Dr</a>
</div>
</div>
</footer>

<script>
// Mobile Menu
var menuBtn = document.getElementById('menuBtn');
var mobileMenu = document.getElementById('mobileMenu');
menuBtn.addEventListener('click', function() { mobileMenu.classList.toggle('open'); });
function closeMenu() { mobileMenu.classList.remove('open'); }

// Category Filter
var tabs = document.querySelectorAll('.cat-tab');
var items = document.querySelectorAll('.work-item');
var filteredItems = [];

function filterItems(cat) {
    filteredItems = [];
    items.forEach(function(item, index) {
        if (cat === 'all' || item.getAttribute('data-category') === cat) {
            item.style.display = 'block';
            filteredItems.push(item);
        } else {
            item.style.display = 'none';
        }
    });
    document.getElementById('totalNum').textContent = filteredItems.length;
}

tabs.forEach(function(tab) {
    tab.addEventListener('click', function() {
        var cat = this.getAttribute('data-cat');
        tabs.forEach(function(t) { t.classList.remove('active'); });
        this.classList.add('active');
        filterItems(cat);
    });
});

// Initialize
filterItems('all');

// URL params
var urlParams = new URLSearchParams(window.location.search);
var catParam = urlParams.get('cat');
if (catParam) {
    tabs.forEach(function(tab) {
        if (tab.getAttribute('data-cat') === catParam) { tab.click(); }
    });
}

// Lightbox
var lightbox = document.getElementById('lightbox');
var lightboxImg = document.getElementById('lightboxImg');
var lightboxTitle = document.getElementById('lightboxTitle');
var lightboxCategory = document.getElementById('lightboxCategory');
var imgContainer = document.getElementById('imgContainer');
var zoomLevelEl = document.getElementById('zoomLevel');
var currentIndex = 0;

// Zoom & Pan variables
var scale = 1;
var minScale = 1;
var maxScale = 4;
var posX = 0;
var posY = 0;
var isDragging = false;
var startX, startY;

function openLightbox(index) {
    currentIndex = index;
    updateLightbox();
    lightbox.classList.add('active');
    document.body.style.overflow = 'hidden';
}

function updateLightbox() {
    var item = filteredItems[currentIndex];
    var img = item.querySelector('img').src.replace('w=600&h=600', 'w=1600&h=1600');
    var title = item.querySelector('h4').textContent;
    var category = item.querySelector('span').textContent;
    
    lightboxImg.src = img;
    lightboxTitle.textContent = title;
    lightboxCategory.textContent = category;
    document.getElementById('currentNum').textContent = currentIndex + 1;
    
    // Reset zoom and position
    scale = 1;
    posX = 0;
    posY = 0;
    updateImageTransform();
}

function updateImageTransform() {
    lightboxImg.style.transform = 'translate(' + posX + 'px, ' + posY + 'px) scale(' + scale + ')';
    
    // Show zoom level
    zoomLevelEl.textContent = Math.round(scale * 100) + '%';
    zoomLevelEl.classList.add('show');
    clearTimeout(window.zoomTimeout);
    window.zoomTimeout = setTimeout(function() {
        zoomLevelEl.classList.remove('show');
    }, 1000);
}

function closeLightbox() {
    lightbox.classList.remove('active');
    document.body.style.overflow = 'auto';
    scale = 1;
    posX = 0;
    posY = 0;
}

function nextImage() {
    currentIndex = (currentIndex + 1) % filteredItems.length;
    updateLightbox();
}

function prevImage() {
    currentIndex = (currentIndex - 1 + filteredItems.length) % filteredItems.length;
    updateLightbox();
}

// Mouse scroll zoom
imgContainer.addEventListener('wheel', function(e) {
    e.preventDefault();
    var delta = e.deltaY > 0 ? -0.2 : 0.2;
    var newScale = Math.min(maxScale, Math.max(minScale, scale + delta));
    
    // Zoom towards mouse position
    if (newScale !== scale) {
        var rect = imgContainer.getBoundingClientRect();
        var mouseX = e.clientX - rect.left - rect.width / 2;
        var mouseY = e.clientY - rect.top - rect.height / 2;
        
        var ratio = 1 - newScale / scale;
        posX += (mouseX - posX) * ratio;
        posY += (mouseY - posY) * ratio;
        
        scale = newScale;
        
        // Reset position if zoomed out
        if (scale === 1) {
            posX = 0;
            posY = 0;
        }
        
        updateImageTransform();
    }
}, { passive: false });

// Drag to pan
imgContainer.addEventListener('mousedown', function(e) {
    if (scale > 1) {
        isDragging = true;
        startX = e.clientX - posX;
        startY = e.clientY - posY;
        imgContainer.classList.add('dragging');
    }
});

document.addEventListener('mousemove', function(e) {
    if (isDragging) {
        posX = e.clientX - startX;
        posY = e.clientY - startY;
        updateImageTransform();
    }
});

document.addEventListener('mouseup', function() {
    isDragging = false;
    imgContainer.classList.remove('dragging');
});

// Double click to zoom
lightboxImg.addEventListener('dblclick', function(e) {
    if (scale === 1) {
        scale = 2;
        var rect = imgContainer.getBoundingClientRect();
        posX = (rect.width / 2 - e.clientX + rect.left);
        posY = (rect.height / 2 - e.clientY + rect.top);
    } else {
        scale = 1;
        posX = 0;
        posY = 0;
    }
    updateImageTransform();
});

// Zoom buttons
document.getElementById('zoomBtn').addEventListener('click', function() {
    if (scale < maxScale) {
        scale = Math.min(maxScale, scale + 0.5);
    } else {
        scale = 1;
        posX = 0;
        posY = 0;
    }
    updateImageTransform();
});

// Event Listeners
items.forEach(function(item) {
    item.addEventListener('click', function() {
        var idx = filteredItems.indexOf(item);
        if (idx !== -1) openLightbox(idx);
    });
});

document.getElementById('closeBtn').addEventListener('click', closeLightbox);
document.getElementById('nextBtn').addEventListener('click', nextImage);
document.getElementById('prevBtn').addEventListener('click', prevImage);

lightbox.addEventListener('click', function(e) {
    if (e.target === lightbox) closeLightbox();
});

document.addEventListener('keydown', function(e) {
    if (!lightbox.classList.contains('active')) return;
    if (e.key === 'Escape') closeLightbox();
    if (e.key === 'ArrowRight') nextImage();
    if (e.key === 'ArrowLeft') prevImage();
    if (e.key === '+' || e.key === '=') {
        scale = Math.min(maxScale, scale + 0.25);
        updateImageTransform();
    }
    if (e.key === '-') {
        scale = Math.max(minScale, scale - 0.25);
        if (scale === 1) { posX = 0; posY = 0; }
        updateImageTransform();
    }
});

// Touch gestures for mobile
var touchStartDist = 0;
var touchStartScale = 1;
var lastTap = 0;

imgContainer.addEventListener('touchstart', function(e) {
    if (e.touches.length === 2) {
        // Pinch start
        touchStartDist = Math.hypot(
            e.touches[0].clientX - e.touches[1].clientX,
            e.touches[0].clientY - e.touches[1].clientY
        );
        touchStartScale = scale;
    } else if (e.touches.length === 1) {
        // Double tap detection
        var now = Date.now();
        if (now - lastTap < 300) {
            if (scale === 1) {
                scale = 2;
            } else {
                scale = 1;
                posX = 0;
                posY = 0;
            }
            updateImageTransform();
        }
        lastTap = now;
        
        // Pan start
        if (scale > 1) {
            isDragging = true;
            startX = e.touches[0].clientX - posX;
            startY = e.touches[0].clientY - posY;
        }
    }
}, { passive: true });

imgContainer.addEventListener('touchmove', function(e) {
    if (e.touches.length === 2) {
        // Pinch zoom
        var dist = Math.hypot(
            e.touches[0].clientX - e.touches[1].clientX,
            e.touches[0].clientY - e.touches[1].clientY
        );
        scale = Math.min(maxScale, Math.max(minScale, touchStartScale * (dist / touchStartDist)));
        if (scale === 1) { posX = 0; posY = 0; }
        updateImageTransform();
    } else if (isDragging && e.touches.length === 1) {
        // Pan
        posX = e.touches[0].clientX - startX;
        posY = e.touches[0].clientY - startY;
        updateImageTransform();
    }
}, { passive: true });

imgContainer.addEventListener('touchend', function(e) {
    isDragging = false;
    // Swipe to navigate (only when not zoomed)
    if (scale === 1 && e.changedTouches.length === 1) {
        var endX = e.changedTouches[0].clientX;
        if (startX && Math.abs(endX - (startX - posX)) > 50) {
            if (endX < startX - posX) nextImage();
            else prevImage();
        }
    }
}, { passive: true });
</script>

</body>
</html>



